<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}DigiMat{% endblock %}</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600&display=swap" rel="stylesheet">
    {% load static %}
    <style>
        
        html { box-sizing: border-box; }
        *, *:before, *:after { box-sizing: inherit; }
        body { margin:0; font-family: 'Open Sans', Arial, sans-serif; background: linear-gradient(135deg,#25d366 0%,#128c7e 100%); min-height:100vh; color:#222 }
        .app-bar {
            background: linear-gradient(135deg,#25d366 0%,#128c7e 100%); /* match app background */
            color: #fff;
            height:56px;
            display:flex;
            align-items:center;
            justify-content:space-between;
            padding:0 1rem;
            box-shadow: 0 2px 6px rgba(0,0,0,0.15);
        }
        .app-bar .left { display:flex; align-items:center; gap:1rem }
        .app-title { font-weight:600; font-size:1.05rem }
        .page-title { font-weight:600; font-size:0.95rem; opacity:0.95 }
        .nav-links { display:flex; gap:0.5rem }
        .nav-links a { color:#fff; text-decoration:none; padding:6px 10px; border-radius:6px; border:1px solid rgba(255,255,255,0.12) }
        .nav-links a:hover { background: rgba(255,255,255,0.06) }
        .container { max-width:900px; margin:1.25rem auto; padding:0 1rem }
        .card { background:#fff; border-radius:10px; padding:1rem; box-shadow:0 6px 18px rgba(0,0,0,0.06) }

        /* custom SVG close button */
        .modal-close-custom {
        background: transparent;
        border: none;
        padding: 6px;
        border-radius: 6px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        color: #666;               /* controls SVG color via currentColor */
        cursor: pointer;
        }   
        .modal-close-custom svg { width: 18px; height: 18px; display: block; }
        .modal-close-custom:hover { color: #000; background: rgba(0,0,0,0.03); }
        .modal-close-custom:focus { outline: 2px solid #128c7e; outline-offset: 2px; }

        /* form controls consistency */
        input, select, textarea { width:100%; padding:0.7rem; margin:0.4rem 0; border:1px solid #ddd; border-radius:6px; box-sizing:border-box }
        select { appearance:none; -webkit-appearance:none; -moz-appearance:none; background-position: right 0.8rem center; background-repeat: no-repeat }

        /* Hamburger and drawer */
        .hamburger { width:36px; height:36px; display:flex; align-items:center; justify-content:center; cursor:pointer; border-radius:6px; background:transparent; border:none; color:#fff }
        .hamburger .bar { width:20px; height:2px; background:#fff; display:block; position:relative }
        .hamburger .bar:before, .hamburger .bar:after { content:''; position:absolute; left:0; right:0; height:2px; background:#fff }
        .hamburger .bar:before { top:-6px }
        .hamburger .bar:after { top:6px }

        .drawer { position:fixed; left:-280px; top:0; bottom:0; width:280px; background: linear-gradient(135deg,#25d366 0%,#128c7e 100%); box-shadow:2px 0 12px rgba(0,0,0,0.2); transition:left 0.25s ease; z-index:2000; padding-top:56px }
        .drawer.open { left:0 }
        .drawer a { display:block; padding:12px 16px; color:#fff; text-decoration:none; border-bottom:1px solid rgba(255,255,255,0.06); font-weight:600 }
        .drawer a:hover { background: rgba(255,255,255,0.06) }

        .overlay { position:fixed; inset:0; background:rgba(0,0,0,0.4); opacity:0; pointer-events:none; transition:opacity 0.2s ease; z-index:1500 }
        .overlay.show { opacity:1; pointer-events:auto }

        @media (max-width:700px) { .app-bar { padding:0 0.6rem } .page-title{ display:none } }
    </style>
</head>
<body>
    <header class="app-bar">
        <div class="left">
            {% if request.user.is_authenticated %}
                <button id="hamburgerBtn" class="hamburger" aria-label="Open menu">
                    <span class="bar"></span>
                </button>
            {% endif %}
            <a href="{% url 'home' %}" class="app-title" style="color:#fff; text-decoration:none">Pavalavart</a>
            <div class="page-title">{% block page_title %}{% endblock %}</div>
        </div>
        <nav class="nav-links">
            {% if request.user.is_authenticated %}
                <span style="display:inline-block; padding:6px 10px">Hi, {{ request.user.first_name }}</span>
                <!--<a href="{% url 'matches' %}"><img src="{% static 'icons/matches.svg' %}" alt="Matches" style="width:20px;height:20px;vertical-align:middle;margin-right:8px;">Matches</a>
                <a href="{% url 'shortlisted' %}"><img src="{% static 'icons/myfavorites.svg' %}" alt="Shortlisted" style="width:20px;height:20px;vertical-align:middle;margin-right:8px;">Shortlisted</a>
                <a href="{% url 'notifications' %}"><img src="{% static 'icons/notifications.svg' %}" alt="Notifications" style="width:20px;height:20px;vertical-align:middle;margin-right:8px;">Notifications</a>
                <a href="{% url 'profile' %}"><img src="{% static 'icons/myprofile.svg' %}" alt="My Profile" style="width:20px;height:20px;vertical-align:middle;margin-right:8px;">My Profile</a>
                <a href="{% url 'logout' %}"><img src="{% static 'icons/logout.svg' %}" alt="Logout" style="width:20px;height:20px;vertical-align:middle;margin-right:8px;">Logout</a>-->
            {% else %}
                <a href="{% url 'login' %}"><img src="{% static 'icons/login.svg' %}" alt="Login" style="width:20px;height:20px;vertical-align:middle;margin-right:8px;">Login</a>
                <a href="{% url 'register' %}"><img src="{% static 'icons/profile_pic.svg' %}" alt="Register" style="width:20px;height:20px;vertical-align:middle;margin-right:8px;">Register</a>
            {% endif %}
        </nav>
    </header>

    <!-- Drawer and overlay -->
    <div id="appDrawer" class="drawer" role="navigation" aria-hidden="true">
        <a href="{% url 'home' %}"><img src="{% static 'icons/home.svg' %}" alt="Home" style="width:20px;height:20px;vertical-align:middle;margin-right:8px;">Home</a>
        <a href="{% url 'matches' %}"><img src="{% static 'icons/matches.svg' %}" alt="Matches" style="width:20px;height:20px;vertical-align:middle;margin-right:8px;">Matches</a>
        <a href="{% url 'shortlisted' %}"><img src="{% static 'icons/myfavorites.svg' %}" alt="Shortlisted" style="width:20px;height:20px;vertical-align:middle;margin-right:8px;">Shortlisted</a>
        <a href="{% url 'notifications' %}"><img src="{% static 'icons/notifications.svg' %}" alt="Notifications" style="width:20px;height:20px;vertical-align:middle;margin-right:8px;">Notifications</a>
        <a href="{% url 'profile' %}"><img src="{% static 'icons/myprofile.svg' %}" alt="My Profile" style="width:20px;height:20px;vertical-align:middle;margin-right:8px;">My Profile</a>
        <a href="{% url 'logout' %}"><img src="{% static 'icons/logout.svg' %}" alt="Logout" style="width:20px;height:20px;vertical-align:middle;margin-right:8px;">Logout</a>
    </div>
    <div id="drawerOverlay" class="overlay" tabindex="-1"></div>

    <main class="container">
        {% block content %}{% endblock %}
    </main>

    <script>
        (function(){
            const btn = document.getElementById('hamburgerBtn');
            const drawer = document.getElementById('appDrawer');
            const overlay = document.getElementById('drawerOverlay');
            if (btn) {
                btn.addEventListener('click', function(){
                    const open = drawer.classList.toggle('open');
                    overlay.classList.toggle('show', open);
                    drawer.setAttribute('aria-hidden', !open);
                });
                overlay.addEventListener('click', function(){
                    drawer.classList.remove('open');
                    overlay.classList.remove('show');
                    drawer.setAttribute('aria-hidden', 'true');
                });
            }
        })();
    </script>
    {% block scripts %}{% endblock %}
</body>
</html>
